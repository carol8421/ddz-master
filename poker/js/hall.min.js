var websiteHost=window.location.hostname;var isDist=websiteHost.match(/web.ttdz.dasheng.tv/);var isPreDist=websiteHost.match(/123.207.77.220/);var mainUrl=isDist?"https://api.ddz.dasheng.tv":isPreDist?"https://api.ddz.dasheng.tv:4429":"http://123.207.77.220:9001";var appKey=isDist||isPreDist?"p5tvi9dstt364":"4z3hlwrv4zv0t";var v={};var removeObjByClass=function(b){if(b.length!=undefined){for(i in b){document.getElementsByClassName(b[i])[0].parentNode.removeChild(document.getElementsByClassName(b[i])[0])}}else{document.getElementsByClassName(b)[0].parentNode.removeChild(document.getElementsByClassName(b)[0])}};var getQueryString=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var c=window.location.search.substr(1).match(b);if(c!=null){return encodeURI(c[2])}return null};var getScript=function(a,c){var b=document.createElement("script");b.src=a;if(b.readyState){b.onreadystatechange=function(){if(b.readyState=="loaded"||b.readyState=="complete"){b.onreadystatechange=null;if(c){c()}}}}else{b.onload=function(){if(c){c()}}}document.getElementsByTagName("body").item(0).appendChild(b)};(function(){window.HTML=function(){this._video=null;this.options={poster:v.poster,textTrackDisplay:false,loadingSpinner:true,bigPlayButton:false,controls:true,errorDisplay:true,textTrackSettings:false,preload:"none"}};HTML.prototype={buildPlayer_old:function(){var d=this;var a='<a href="./live.html?videoId='+v.chatroom_id+'">';if(v.status==1){a+="<b>直播</b>"}else{a+="<b>重播</b>"}a+="<span>"+v.title+"</span></a>";$("#videoTitle").append(a);d._video=document.createElement("video");d._video.setAttribute("webkit-playsinline",true);d._video.setAttribute("playsinline",true);d._video.setAttribute("x-webkit-airplay",true);d._video.setAttribute("controls",true);var b=document.createElement("source");b.src=v.playUrl;b.setAttribute("type","application/x-mpegURL");d._video.appendChild(b);document.getElementById("video").appendChild(d._video);myPlayer=videojs(d._video,d.options,function c(){document.getElementsByTagName("video")[0].setAttribute("controls",true)})},buildPlayer:function(){var a="";a+='<a href="./live.html?videoId='+v.chatroom_id+'" class="home-video"><span class="home-title home-video-header '+(v.status===1?"icon-live":"icon-playback")+'">'+v.title+(v.status===1?"<b>"+v.watch_num+"</b>":"")+'</span><i class="home-video-poster" style="background-image: url('+v.poster+')"></i></a>';$(".home-left").append(a)},itemHTML:function(f,e,a,c,g,d){var b="";if(!d){b+="<li>"}b+='<a href="./live.html?videoId='+f+'">';if(d==2){b+='<i class="swiper-lazy" data-background="'+e+'">'}else{b+='<i style="background-image: url('+e+')">'}b+="</i>";b+="<p>"+g+"</p>";b+="</a>";if(!d){b+="</li>"}return b},detailHTML:function(b,d,c){var a='<div class="detail">';a+='<img src="'+b+'" alt="">';a+="<h2>"+d+"</h2>";a+="<p>"+c+"</p>";a+="</div>";return a}}})();(function(){window.Dialog=function(){};Dialog.prototype={createDialog:function(a,f,e){var d=document.createElement("div");d.className="dialog d"+a;f.appendChild(d);var h=document.createElement("a");h.className="close closeIt";d.appendChild(h);var f=document.createElement("p");if(a==1){f.innerHTML="在<strong>大圣Live</strong>上预约即可收到节目开播通知还有更多精彩节目等着你！"}else{if(a==2){f.innerHTML="前往<strong>大圣Live</strong>即可领取免费门票，还有更多精彩内容等着你！"}else{if(a==3){var g=document.createElement("h3");g.innerHTML=e.title;d.appendChild(g);var b=document.createElement("img");b.src="./src/images/hall/gift.png";d.appendChild(b);f.innerHTML="登录<strong>大圣Live</strong>，即可每日在个人中心-游戏礼包中心领取得分加成、记牌器等道具奖品"}}}d.appendChild(f);var c=document.createElement("a");c.className="button";c.innerHTML="<b>"+e.btnTitle+"</b>";d.appendChild(c)},openDialog:function(a,c){if(document.getElementsByClassName("mask").length>0){if(document.getElementsByClassName("d"+a).length<=0){this.createDialog(a,document.getElementsByClassName("mask")[0],c)}}else{var b=document.createElement("div");b.className="mask m-"+a;document.getElementsByTagName("body")[0].appendChild(b);this.createDialog(a,b,c)}document.getElementsByClassName("mask")[0].className="mask m-"+a},updateDialog:function(a,b){document.getElementsByClassName("d"+a)[0].getElementsByClassName("button")[0].classList.add(b.btnClass);document.getElementsByClassName("d"+a)[0].getElementsByClassName("button")[0].innerHTML="<b>"+b.btnTitle+"</b>";document.getElementsByClassName("mask")[0].className="mask m-"+a},closeDialog:function(){document.getElementsByClassName("mask")[0].className="mask"}}})();var compress=function(b,a,c,d){return b+"?imageView2/0/w/"+a+"/h/"+c+"/format/jpg/interlace/1/q/"+d};var APPCommon={ua:navigator.userAgent,MQQBrowser:function(){var c=this.ua.split(" ");var a=false;for(var b=0;b<c.length;b++){if(c[b].indexOf("TBS/")>-1){a=true}else{if(c[b].indexOf("MQQBrowser")>-1){a=true}}}return a},MSDK:navigator.userAgent.indexOf("MSDK")>-1?true:false,weixin:navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"?true:false,android:navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1?true:false,appSchema:"mktv://stream",appApk:"https://api.dasheng.tv:4431/v1/app/download?market=tiantiandezhouzhibojian",iphoneDownUrl:"//itunes.apple.com/cn/app/%E5%A4%A7%E5%9C%A3-%E5%8F%AF%E4%BB%A5%E7%8E%A9%E7%9A%84%E5%B0%8F%E8%A7%86%E9%A2%91/id1327268860?ls=1&mt=8",sjqqDownUrl:"//a.app.qq.com/o/simple.jsp?pkgname=com.appgame.mktv",openApp:function(){var b=this;var a=new Date();if(APPCommon.android){if(APPCommon.weixin){window.location=this.sjqqDownUrl}else{if(APPCommon.MSDK){window.location=this.appApk}else{window.location=b.appSchema;window.setTimeout(function(){var c=new Date();if(c-a<1200){window.location=b.appApk}else{window.close()}},33)}}}else{window.location=b.iphoneDownUrl}}};$(document).delegate("a.button","click",function(){APPCommon.openApp()});if(getQueryString("Nick")&&getQueryString("Nick")!="--"){localStorage.Nick=decodeURI(getQueryString("Nick"))};